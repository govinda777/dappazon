<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:10,&quot;tests&quot;:13,&quot;passes&quot;:8,&quot;pending&quot;:0,&quot;failures&quot;:5,&quot;start&quot;:&quot;2023-12-02T20:35:41.064Z&quot;,&quot;end&quot;:&quot;2023-12-02T20:35:42.342Z&quot;,&quot;duration&quot;:1278,&quot;testsRegistered&quot;:15,&quot;passPercent&quot;:53.333333333333336,&quot;pendingPercent&quot;:0,&quot;other&quot;:1,&quot;hasOther&quot;:true,&quot;skipped&quot;:2,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;8937c34a-79ad-4839-a2bc-6d936727ecd9&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;603eed09-e6e8-4f08-be9c-f7bd3cff3916&quot;,&quot;title&quot;:&quot;Dappazon&quot;,&quot;fullFile&quot;:&quot;/Users/gosouza/projeto/dappazon/test/Dappazon.js&quot;,&quot;file&quot;:&quot;/test/Dappazon.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Dappazon\&quot;&quot;,&quot;fullTitle&quot;:&quot;Dappazon \&quot;before each\&quot; hook in \&quot;Dappazon\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Setup accounts\n[deployer, buyer] = await ethers.getSigners()\nconst Product = await ethers.getContractFactory(\&quot;Product\&quot;)\nproduct = await Product.deploy()\n\nconsole.log(`Product: ${product.address}`)\n\nconst Order = await ethers.getContractFactory(\&quot;Order\&quot;)\norder = await Order.deploy()\nconsole.log(`Order: ${order.address}`)\nconst ShoppingCart = await ethers.getContractFactory(\&quot;ShoppingCart\&quot;)\nshoppingCart = await ShoppingCart.deploy(product.address)\nconsole.log(`ShoppingCart: ${shoppingCart.address}`)\nconst Dappazon = await ethers.getContractFactory(\&quot;Dappazon\&quot;)\ndappazon = await Dappazon.deploy(product.address, order.address, shoppingCart.address)\nconsole.log(`Dappazon: ${dappazon.address}`)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f8ffe52-0498-44bd-b803-77cb678509c1&quot;,&quot;parentUUID&quot;:&quot;603eed09-e6e8-4f08-be9c-f7bd3cff3916&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7cf7004b-9746-4f68-8d80-907ef8fc9a5e&quot;,&quot;title&quot;:&quot;Deployment&quot;,&quot;fullFile&quot;:&quot;/Users/gosouza/projeto/dappazon/test/Dappazon.js&quot;,&quot;file&quot;:&quot;/test/Dappazon.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Sets the owner&quot;,&quot;fullTitle&quot;:&quot;Dappazon Deployment Sets the owner&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(await dappazon.owner()).to.equal(deployer.address)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e0be980-2909-47c0-8ec3-bf3058247b1b&quot;,&quot;parentUUID&quot;:&quot;7cf7004b-9746-4f68-8d80-907ef8fc9a5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e0be980-2909-47c0-8ec3-bf3058247b1b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;0d0389ac-42f0-4483-82c7-990b33d10f43&quot;,&quot;title&quot;:&quot;Buying&quot;,&quot;fullFile&quot;:&quot;/Users/gosouza/projeto/dappazon/test/Dappazon.js&quot;,&quot;file&quot;:&quot;/test/Dappazon.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Buying\&quot;&quot;,&quot;fullTitle&quot;:&quot;Dappazon Buying \&quot;before each\&quot; hook in \&quot;Buying\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;productInfo = createNewProduct()\nshoppingCartInfo = createNewShoppingCart(productInfo)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e59ad761-d86d-4239-821f-a4a1617140ec&quot;,&quot;parentUUID&quot;:&quot;0d0389ac-42f0-4483-82c7-990b33d10f43&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Updates buyer&#x27;s order count&quot;,&quot;fullTitle&quot;:&quot;Dappazon Buying Updates buyer&#x27;s order count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await dappazon.orderCount(buyer.address)\nexpect(result).to.equal(1)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: dappazon.orderCount is not a function&quot;,&quot;estack&quot;:&quot;TypeError: dappazon.orderCount is not a function\n    at Context.&lt;anonymous&gt; (test/Dappazon.js:73:37)&quot;},&quot;uuid&quot;:&quot;45089137-1091-4e1f-bdcc-0cd8812562b7&quot;,&quot;parentUUID&quot;:&quot;0d0389ac-42f0-4483-82c7-990b33d10f43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Adds the order&quot;,&quot;fullTitle&quot;:&quot;Dappazon Buying Adds the order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const order = await dappazon.orders(buyer.address, 1)\nexpect(order.time).to.be.greaterThan(0)\nexpect(order.item.name).to.equal(NAME)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: dappazon.orders is not a function&quot;,&quot;estack&quot;:&quot;TypeError: dappazon.orders is not a function\n    at Context.&lt;anonymous&gt; (test/Dappazon.js:78:36)&quot;},&quot;uuid&quot;:&quot;673cde6a-2171-4b29-b9c2-2abbaf62e1f8&quot;,&quot;parentUUID&quot;:&quot;0d0389ac-42f0-4483-82c7-990b33d10f43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Updates the contract balance&quot;,&quot;fullTitle&quot;:&quot;Dappazon Buying Updates the contract balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await ethers.provider.getBalance(dappazon.address)\nexpect(result).to.equal(COST)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: COST is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: COST is not defined\n    at Context.&lt;anonymous&gt; (test/Dappazon.js:86:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at listOnTimeout (node:internal/timers:540:9)\n    at processTimers (node:internal/timers:514:7)&quot;},&quot;uuid&quot;:&quot;dbef350a-6c15-416f-a6a2-b92e4b116a97&quot;,&quot;parentUUID&quot;:&quot;0d0389ac-42f0-4483-82c7-990b33d10f43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Emits Buy event&quot;,&quot;fullTitle&quot;:&quot;Dappazon Buying Emits Buy event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(transaction).to.emit(dappazon, \&quot;Buy\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28c0fae8-d9c2-4a7b-920f-442462d9ec30&quot;,&quot;parentUUID&quot;:&quot;0d0389ac-42f0-4483-82c7-990b33d10f43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;28c0fae8-d9c2-4a7b-920f-442462d9ec30&quot;],&quot;failures&quot;:[&quot;45089137-1091-4e1f-bdcc-0cd8812562b7&quot;,&quot;673cde6a-2171-4b29-b9c2-2abbaf62e1f8&quot;,&quot;dbef350a-6c15-416f-a6a2-b92e4b116a97&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;7c194671-1fa9-4987-b53f-917cfe614e66&quot;,&quot;title&quot;:&quot;Withdrawing&quot;,&quot;fullFile&quot;:&quot;/Users/gosouza/projeto/dappazon/test/Dappazon.js&quot;,&quot;file&quot;:&quot;/test/Dappazon.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;Updates the owner balance\&quot;&quot;,&quot;fullTitle&quot;:&quot;Dappazon Withdrawing \&quot;before each\&quot; hook for \&quot;Updates the owner balance\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// List a item\nlet transaction = await dappazon.connect(deployer).list(ID, NAME, CATEGORY, IMAGE, COST, RATING, STOCK)\nawait transaction.wait()\n// Buy a item\ntransaction = await dappazon.connect(buyer).buy(ID, { value: COST })\nawait transaction.wait()\n// Get Deployer balance before\nbalanceBefore = await ethers.provider.getBalance(deployer.address)\n// Withdraw\ntransaction = await dappazon.connect(deployer).withdraw()\nawait transaction.wait()&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: ID is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: ID is not defined\n    at Context.&lt;anonymous&gt; (test/Dappazon.js:99:63)\n    at processImmediate (node:internal/timers:478:21)&quot;},&quot;uuid&quot;:&quot;331468f9-6483-4073-a1fe-6fe1e2f6afc7&quot;,&quot;parentUUID&quot;:&quot;7c194671-1fa9-4987-b53f-917cfe614e66&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Updates the owner balance&quot;,&quot;fullTitle&quot;:&quot;Dappazon Withdrawing Updates the owner balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const balanceAfter = await ethers.provider.getBalance(deployer.address)\nexpect(balanceAfter).to.be.greaterThan(balanceBefore)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e38bd09d-ec24-44c1-b642-9705be10e55a&quot;,&quot;parentUUID&quot;:&quot;7c194671-1fa9-4987-b53f-917cfe614e66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;Updates the contract balance&quot;,&quot;fullTitle&quot;:&quot;Dappazon Withdrawing Updates the contract balance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await ethers.provider.getBalance(dappazon.address)\nexpect(result).to.equal(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7063fade-a58f-4983-a6de-6f3e80f254f3&quot;,&quot;parentUUID&quot;:&quot;7c194671-1fa9-4987-b53f-917cfe614e66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;e38bd09d-ec24-44c1-b642-9705be10e55a&quot;,&quot;7063fade-a58f-4983-a6de-6f3e80f254f3&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;5978063a-69e6-4933-9da0-fc0e7ad6621e&quot;,&quot;title&quot;:&quot;Product&quot;,&quot;fullFile&quot;:&quot;/Users/gosouza/projeto/dappazon/test/Product.js&quot;,&quot;file&quot;:&quot;/test/Product.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Product\&quot;&quot;,&quot;fullTitle&quot;:&quot;Product \&quot;before each\&quot; hook in \&quot;Product\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;[owner] = await ethers.getSigners();\nProduct = await ethers.getContractFactory(\&quot;Product\&quot;);\nproduct = await Product.deploy();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22fd9d04-b510-4512-b86f-abd1e4c682a1&quot;,&quot;parentUUID&quot;:&quot;5978063a-69e6-4933-9da0-fc0e7ad6621e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;073df1c1-594a-4966-bcd0-d674cdbb3bf8&quot;,&quot;title&quot;:&quot;Deployment&quot;,&quot;fullFile&quot;:&quot;/Users/gosouza/projeto/dappazon/test/Product.js&quot;,&quot;file&quot;:&quot;/test/Product.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should set the right owner&quot;,&quot;fullTitle&quot;:&quot;Product Deployment Should set the right owner&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(await product.owner()).to.equal(owner.address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92fd7901-4abd-4108-b3b4-528996f58f42&quot;,&quot;parentUUID&quot;:&quot;073df1c1-594a-4966-bcd0-d674cdbb3bf8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92fd7901-4abd-4108-b3b4-528996f58f42&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;3dc5b788-7cc8-4173-a6c6-207667153878&quot;,&quot;title&quot;:&quot;Product management&quot;,&quot;fullFile&quot;:&quot;/Users/gosouza/projeto/dappazon/test/Product.js&quot;,&quot;file&quot;:&quot;/test/Product.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create a product and emit event with correct data&quot;,&quot;fullTitle&quot;:&quot;Product Product management Should create a product and emit event with correct data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const productData = { cost: 100, rating: 5, stock: 10 };\n  \n// Envia a transação e espera pela confirmação\nconst tx = await product.create(productData);\nconst receipt = await tx.wait();\n  \n// Procura pelo evento ProductCreated no recibo da transação\nconst ProductCreatedEvent = receipt.events.find(event =&gt; event.event === &#x27;ProductCreated&#x27;);\n  \nconst createdProduct = await product.read(ProductCreatedEvent.args.id);\nexpect(createdProduct.cost).to.equal(productData.cost);\nexpect(createdProduct.rating).to.equal(productData.rating);\nexpect(createdProduct.stock).to.equal(productData.stock);\n// Verifica os dados do evento\nexpect(ProductCreatedEvent.args.id).to.equal(1);\nexpect(ProductCreatedEvent.args.product.cost).to.equal(productData.cost);\nexpect(ProductCreatedEvent.args.product.rating).to.equal(productData.rating);\nexpect(ProductCreatedEvent.args.product.stock).to.equal(productData.stock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1796e7e1-0542-42f8-bac6-82871d1ef828&quot;,&quot;parentUUID&quot;:&quot;3dc5b788-7cc8-4173-a6c6-207667153878&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should update a product and emit event with correct data&quot;,&quot;fullTitle&quot;:&quot;Product Product management Should update a product and emit event with correct data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await product.create({ cost: 100, rating: 5, stock: 10 });\n\nconst productDataUpdate = { cost: 200, rating: 4, stock: 5 }\n\nconst tx = await product.update(1, productDataUpdate);\nconst receipt = await tx.wait();\n// Procura pelo evento ProductCreated no recibo da transação\nconst ProductUpdated = receipt.events.find(event =&gt; event.event === &#x27;ProductUpdated&#x27;);\n\nexpect(ProductUpdated.args.id).to.equal(1);\nexpect(ProductUpdated.args.product.cost).to.equal(productDataUpdate.cost);\nexpect(ProductUpdated.args.product.rating).to.equal(productDataUpdate.rating);\nexpect(ProductUpdated.args.product.stock).to.equal(productDataUpdate.stock);\nconst updatedProduct = await product.read(1);\nexpect(updatedProduct.cost).to.equal(200);\nexpect(updatedProduct.rating).to.equal(4);\nexpect(updatedProduct.stock).to.equal(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffbade87-cc7b-4ffd-89ab-779e2dfea98a&quot;,&quot;parentUUID&quot;:&quot;3dc5b788-7cc8-4173-a6c6-207667153878&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should update stock a product and emit event with correct data&quot;,&quot;fullTitle&quot;:&quot;Product Product management Should update stock a product and emit event with correct data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const productData = { \n  cost: ethers.BigNumber.from(100), \n  rating: ethers.BigNumber.from(5), \n  stock: ethers.BigNumber.from(10) \n}\nawait product.create(productData);\nconst productDataUpdateStock = [{ \n  productId: ethers.BigNumber.from(1), \n  cost: ethers.BigNumber.from(200), \n  rating: ethers.BigNumber.from(5), \n  quantity: ethers.BigNumber.from(2) \n}]\n\nconst receipt = await product.updateStock(productDataUpdateStock)\n.then(tx =&gt; tx.wait());;\n\n// Procura pelo evento ProductCreated no recibo da transação\nconst shoppingCartProducts = util.getEvents(receipt, &#x27;ProductUpdateStock&#x27;).args.shoppingCartProducts;\n    \nexpect(shoppingCartProducts[0][\&quot;productId\&quot;] instanceof BigNumber)\nexpect(shoppingCartProducts[0][\&quot;productId\&quot;]).to.equal(productDataUpdateStock[0].productId)\nexpect(util.isGreaterThan(shoppingCartProducts[0][\&quot;quantity\&quot;], productDataUpdateStock[0].quantity))\nconst updatedProduct = await product.read(1);\nexpect(updatedProduct.cost).to.equal(productData.cost);\nexpect(updatedProduct.rating).to.equal(productData.rating);\nexpect(updatedProduct.stock).to.equal(productData.stock - productDataUpdateStock[0].quantity);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52b13666-f72d-4bec-91d0-a097c4f3b351&quot;,&quot;parentUUID&quot;:&quot;3dc5b788-7cc8-4173-a6c6-207667153878&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should delete a product and emit event with correct data&quot;,&quot;fullTitle&quot;:&quot;Product Product management Should delete a product and emit event with correct data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await product.create({ cost: 100, rating: 5, stock: 10 });\n\nconst tx = await product.del(1);\nconst receipt = await tx.wait();\nconst ProductDeleted = receipt.events.find(event =&gt; event.event === &#x27;ProductDeleted&#x27;);\nexpect(ProductDeleted.args.id).to.equal(1);\nconst result = await product.read(1);\nexpect(result.cost).to.equal(ethers.constants.Zero);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5cd9987-678e-4602-bc3b-444d0d381c08&quot;,&quot;parentUUID&quot;:&quot;3dc5b788-7cc8-4173-a6c6-207667153878&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1796e7e1-0542-42f8-bac6-82871d1ef828&quot;,&quot;ffbade87-cc7b-4ffd-89ab-779e2dfea98a&quot;,&quot;52b13666-f72d-4bec-91d0-a097c4f3b351&quot;,&quot;f5cd9987-678e-4602-bc3b-444d0d381c08&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:56,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;ef514d0f-b017-43d8-afc3-bb4cdc33676c&quot;,&quot;title&quot;:&quot;ShoppingCart&quot;,&quot;fullFile&quot;:&quot;/Users/gosouza/projeto/dappazon/test/ShoppingCart.js&quot;,&quot;file&quot;:&quot;/test/ShoppingCart.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;ShoppingCart\&quot;&quot;,&quot;fullTitle&quot;:&quot;ShoppingCart \&quot;before each\&quot; hook in \&quot;ShoppingCart\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;[owner] = await ethers.getSigners();\nProduct = await ethers.getContractFactory(\&quot;Product\&quot;);\nproduct = await Product.deploy();\nShoppingCart = await ethers.getContractFactory(\&quot;ShoppingCart\&quot;);\nshoppingCart = await ShoppingCart.deploy(product.address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9085d662-24e8-4619-8a10-580a9b7a1d19&quot;,&quot;parentUUID&quot;:&quot;ef514d0f-b017-43d8-afc3-bb4cdc33676c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;44a244b3-f3eb-4120-8b73-dbf1db193cb3&quot;,&quot;title&quot;:&quot;Deployment&quot;,&quot;fullFile&quot;:&quot;/Users/gosouza/projeto/dappazon/test/ShoppingCart.js&quot;,&quot;file&quot;:&quot;/test/ShoppingCart.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should set the right owner&quot;,&quot;fullTitle&quot;:&quot;ShoppingCart Deployment Should set the right owner&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(await shoppingCart.owner()).to.equal(owner.address);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40c46a0d-a31c-486e-9606-224dd6de789b&quot;,&quot;parentUUID&quot;:&quot;44a244b3-f3eb-4120-8b73-dbf1db193cb3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;40c46a0d-a31c-486e-9606-224dd6de789b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;8d065f28-5772-421e-b59c-0ab3f97f2d08&quot;,&quot;title&quot;:&quot;ShoppingCart management&quot;,&quot;fullFile&quot;:&quot;/Users/gosouza/projeto/dappazon/test/ShoppingCart.js&quot;,&quot;file&quot;:&quot;/test/ShoppingCart.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create a shopping cart and emit event with correct data&quot;,&quot;fullTitle&quot;:&quot;ShoppingCart ShoppingCart management Should create a shopping cart and emit event with correct data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create a new shopping cart\nconst shoppingCartData = { id: 1, total_cost: 0 };\nconst tx = await shoppingCart.create(shoppingCartData);\nconst receipt = await tx.wait();\n// Find the ShoppingCartCreated event in the transaction receipt\nconst ShoppingCartCreatedEvent = receipt.events.find(event =&gt; event.event === &#x27;ShoppingCartCreated&#x27;);\nexpect(ShoppingCartCreatedEvent.args.id).to.equal(1);\nexpect(ShoppingCartCreatedEvent.args.shoppingCartInfo.total_cost).to.equal(shoppingCartData.total_cost);\n// Ensure the shopping cart is stored with the correct info\nconst createdShoppingCart = await shoppingCart.read(1);\nexpect(createdShoppingCart.total_cost).to.equal(shoppingCartData.total_cost);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot read properties of undefined (reading &#x27;args&#x27;)&quot;,&quot;estack&quot;:&quot;TypeError: Cannot read properties of undefined (reading &#x27;args&#x27;)\n    at Context.&lt;anonymous&gt; (test/ShoppingCart.js:34:39)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at listOnTimeout (node:internal/timers:540:9)\n    at processTimers (node:internal/timers:514:7)&quot;},&quot;uuid&quot;:&quot;177fff52-cea7-4c16-9515-8c32985cc0ef&quot;,&quot;parentUUID&quot;:&quot;8d065f28-5772-421e-b59c-0ab3f97f2d08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should add a product to the shopping cart and emit event with correct data&quot;,&quot;fullTitle&quot;:&quot;ShoppingCart ShoppingCart management Should add a product to the shopping cart and emit event with correct data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create a product before testing shopping cart functionality\nawait product.create({ cost: 100, rating: 5, stock: 10 });\nawait shoppingCart.create({ id: 1, total_cost: 0 });\n// Add product to the shopping cart\nconst tx = await shoppingCart.addProduct(1, 1, 1); // Shopping cart ID, product ID, quantity\nconst receipt = await tx.wait();\n// Find the ShoppingCartAddProduct event in the transaction receipt\nconst ShoppingCartAddProductEvent = receipt.events.find(event =&gt; event.event === &#x27;ShoppingCartAddProduct&#x27;);\nexpect(ShoppingCartAddProductEvent.args.id).to.equal(1);\nexpect(ShoppingCartAddProductEvent.args.shoppingCartInfo.total_cost).to.equal(100); // Assuming cost is cumulative\nconst itemsInfo = ShoppingCartAddProductEvent.args.itemsInfo;\nexpect(itemsInfo[0].productId).to.equal(1);\nexpect(itemsInfo[0].cost).to.equal(100);\nexpect(itemsInfo[0].rating).to.equal(5);\nexpect(itemsInfo[0].quantity).to.equal(1);\n// Ensure the shopping cart has the product with correct info\nconst shoppingCartItems = await shoppingCart.readProducts(1);\nexpect(shoppingCartItems[0].productId).to.equal(1);\nexpect(shoppingCartItems[0].cost).to.equal(100);\nexpect(shoppingCartItems[0].rating).to.equal(5);\nexpect(shoppingCartItems[0].quantity).to.equal(1);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 0 to equal 100. The numerical values of the given \&quot;ethers.BigNumber\&quot; and \&quot;number\&quot; inputs were compared, and they differed.&quot;,&quot;estack&quot;:&quot;AssertionError: expected 0 to equal 100. The numerical values of the given \&quot;ethers.BigNumber\&quot; and \&quot;number\&quot; inputs were compared, and they differed.\n    at Context.&lt;anonymous&gt; (test/ShoppingCart.js:55:79)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at listOnTimeout (node:internal/timers:540:9)\n    at processTimers (node:internal/timers:514:7)&quot;,&quot;diff&quot;:&quot;- 0\n+ 100\n&quot;},&quot;uuid&quot;:&quot;540f5fe8-5888-4ed8-98cd-913243f22f91&quot;,&quot;parentUUID&quot;:&quot;8d065f28-5772-421e-b59c-0ab3f97f2d08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;177fff52-cea7-4c16-9515-8c32985cc0ef&quot;,&quot;540f5fe8-5888-4ed8-98cd-913243f22f91&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:40000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.1.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;dappazon&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/Users/gosouza/projeto/dappazon/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/Users/gosouza/projeto/dappazon/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>